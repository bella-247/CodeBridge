<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Code Bridge - Custom Templates</title>
        <link rel="stylesheet" href="../styles.css" />
        <link rel="stylesheet" href="options.css" />
    </head>

    <body class="dark-theme">
        <div class="app-container">
            <header>
                <div class="logo-container">
                    <div class="logo-icon">
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M7 8L3 12L7 16"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                            <path
                                d="M17 8L21 12L17 16"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                            <path
                                d="M14 4L10 20"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                        </svg>
                    </div>
                    <h2>Configuration</h2>
                </div>
                <p class="muted">
                    Code Bridge Customization & Power User Settings
                </p>
            </header>

            <main class="templates-container">
                <div class="section-title">General Defaults</div>
                <div class="glass-card">
                    <div class="form-grid">
                        <div class="input-group">
                            <label>Default Owner</label>
                            <input
                                id="owner"
                                type="text"
                                placeholder="your-username"
                            />
                        </div>
                        <div class="input-group">
                            <label>Default Repo</label>
                            <input
                                id="repo"
                                type="text"
                                placeholder="leetcode-solutions"
                            />
                        </div>
                    </div>
                    <div class="form-grid" style="margin-top: 12px">
                        <div class="input-group">
                            <label>Default Branch</label>
                            <input id="branch" type="text" value="main" />
                        </div>
                        <div class="input-group">
                            <label>Overwrite Existing</label>
                            <div class="checkbox-inline">
                                <input id="allowUpdateDefault" type="checkbox" />
                                <label
                                    for="allowUpdateDefault"
                                    style="
                                        text-transform: none;
                                        font-size: 12px;
                                        margin: 0;
                                    "
                                >
                                    Allow updates
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-grid" style="margin-top: 12px">
                        <div class="input-group">
                            <label>Problem Statement</label>
                            <div class="checkbox-inline">
                                <input
                                    id="includeProblemStatement"
                                    type="checkbox"
                                />
                                <label
                                    for="includeProblemStatement"
                                    style="
                                        text-transform: none;
                                        font-size: 12px;
                                        margin: 0;
                                    "
                                >
                                    Always include
                                </label>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Floating Bubble</label>
                            <div class="checkbox-inline">
                                <input id="showBubble" type="checkbox" />
                                <label
                                    for="showBubble"
                                    style="
                                        text-transform: none;
                                        font-size: 12px;
                                        margin: 0;
                                    "
                                >
                                    Show bubble
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-title">Session Tracker</div>
                <div class="glass-card">
                    <div class="form-grid">
                        <div class="input-group">
                            <label>Timer Mode</label>
                            <select id="timerStartMode">
                                <option value="DELAYED_AUTO">
                                    Delayed Auto
                                </option>
                                <option value="TYPING">Typing</option>
                                <option value="MANUAL">Manual</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Auto Start Delay (sec)</label>
                            <input
                                id="autoStartDelay"
                                type="number"
                                min="0"
                                step="1"
                                placeholder="10"
                            />
                        </div>
                    </div>
                    <div class="form-grid" style="margin-top: 12px">
                        <div class="input-group">
                            <label>Session Prune Days</label>
                            <input
                                id="sessionPruneDays"
                                type="number"
                                min="1"
                                step="1"
                                placeholder="90"
                            />
                        </div>
                        <div class="input-group">
                            <label>Max Sessions Stored</label>
                            <input
                                id="maxSessionsStored"
                                type="number"
                                min="1"
                                step="1"
                                placeholder="1000"
                            />
                        </div>
                    </div>
                    <div class="form-grid" style="margin-top: 12px">
                        <div class="input-group">
                            <label>Platforms Enabled</label>
                            <div id="platformsContainer" class="checkbox-group">
                                <!-- Dynamically populated -->
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Timer Overlay</label>
                            <div class="checkbox-inline">
                                <input id="showTimerOverlay" type="checkbox" />
                                <label
                                    for="showTimerOverlay"
                                    style="
                                        text-transform: none;
                                        font-size: 12px;
                                        margin: 0;
                                    "
                                >
                                    Show timer
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-grid" style="margin-top: 12px">
                        <div class="input-group">
                            <label>Timer Size</label>
                            <select id="timerOverlaySize">
                                <option value="small">Small</option>
                                <option value="medium">Medium</option>
                                <option value="large">Large</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-grid" style="margin-top: 12px">
                        <div class="input-group">
                            <label>Auto Stop on Accepted</label>
                            <div class="checkbox-inline">
                                <input id="autoStopOnAccepted" type="checkbox" />
                                <label
                                    for="autoStopOnAccepted"
                                    style="
                                        text-transform: none;
                                        font-size: 12px;
                                        margin: 0;
                                    "
                                >
                                    Stop when accepted
                                </label>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Auto Stop on Problem Switch</label>
                            <div class="checkbox-inline">
                                <input
                                    id="autoStopOnProblemSwitch"
                                    type="checkbox"
                                />
                                <label
                                    for="autoStopOnProblemSwitch"
                                    style="
                                        text-transform: none;
                                        font-size: 12px;
                                        margin: 0;
                                    "
                                >
                                    Stop previous session
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-grid" style="margin-top: 12px">
                        <div class="input-group">
                            <label>Inactivity Timeout (min)</label>
                            <input
                                id="inactivityTimeout"
                                type="number"
                                min="0"
                                step="1"
                                placeholder="30"
                            />
                        </div>
                        <div class="input-group">
                            <label>Allow Manual Stop</label>
                            <div class="checkbox-inline">
                                <input id="allowManualStop" type="checkbox" />
                                <label
                                    for="allowManualStop"
                                    style="
                                        text-transform: none;
                                        font-size: 12px;
                                        margin: 0;
                                    "
                                >
                                    Show end button
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-title">Data &amp; Backup</div>
                <div class="glass-card">
                    <div class="card-title">Settings (JSON)</div>
                    <div class="card-subtitle">
                        Import or export configuration only. Sessions are not included.
                    </div>
                    <div class="form-grid">
                        <div class="input-group">
                            <label>Export Settings</label>
                            <button id="exportSettingsBtn" class="btn secondary">
                                Download JSON
                            </button>
                        </div>
                        <div class="input-group">
                            <label>Import Settings</label>
                            <input
                                id="importSettingsFile"
                                type="file"
                                class="file-input"
                                accept="application/json"
                            />
                            <button id="importSettingsBtn" class="btn secondary">
                                Import JSON
                            </button>
                        </div>
                    </div>
                </div>

                <div class="glass-card">
                    <div class="card-title">User Data Export</div>
                    <div class="card-subtitle">
                        Export session data for the dashboard. Import is not available.
                    </div>
                    <div class="form-grid">
                        <div class="input-group">
                            <label>Format</label>
                            <select id="userDataFormat">
                                <option value="json">JSON</option>
                                <option value="csv">CSV</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Export Sessions</label>
                            <button id="exportUserDataBtn" class="btn secondary">
                                Download
                            </button>
                        </div>
                    </div>
                </div>

                <div class="section-title">Power User Templates</div>

                <div class="glass-card template-field">
                    <label>Commit Message Template</label>
                    <textarea
                        id="templateCommit"
                        placeholder="feat: solved [id] - [title] ([difficulty])"
                    ></textarea>
                    <div class="vars-guide">
                        Available: <code>[id]</code>, <code>[title]</code>,
                        <code>[difficulty]</code>, <code>[language]</code>,
                        <code>[attempts]</code>.
                        Note: <code>[time]</code> is not supported in commit
                        messages.
                    </div>
                </div>

                <div class="glass-card template-field">
                    <label>File Path Template</label>
                    <textarea
                        id="templatePath"
                        placeholder="[id]-[slug]/solution.[ext]"
                    ></textarea>
                    <div class="vars-guide">
                        Available: <code>[id]</code>, <code>[slug]</code>,
                        <code>[difficulty]</code>, <code>[ext]</code>,
                        <code>[platform]</code>
                    </div>
                </div>

                <div class="glass-card template-field">
                    <label>Solution File Header (Comment)</label>
                    <textarea
                        id="templateSolution"
                        placeholder="[title]\n[url]\n[difficulty]"
                    ></textarea>
                    <div class="vars-guide">
                        Available: <code>[title]</code>, <code>[id]</code>,
                        <code>[difficulty]</code>, <code>[url]</code>,
                        <code>[time]</code>, <code>[attempts]</code>,
                        <code>[platform]</code>. This will
                        be automatically wrapped in comments based on the
                        language.
                    </div>
                </div>

                <div class="glass-card template-field">
                    <label>README Template (Markdown)</label>
                    <textarea
                        id="templateReadme"
                        placeholder="# [title]\n\n**Difficulty:** [difficulty]\n\n**Time:** [time]\n\n[url]"
                    ></textarea>
                    <div class="vars-guide">
                        Available: <code>[title]</code>, <code>[id]</code>,
                        <code>[difficulty]</code>, <code>[url]</code>,
                        <code>[description]</code>, <code>[time]</code>,
                        <code>[attempts]</code>, <code>[tags]</code>,
                        <code>[platform]</code>
                    </div>
                </div>

                <div class="actions">
                    <button id="saveBtn" class="btn primary full-width">
                        Save Configuration
                    </button>
                    <button
                        id="resetTemplates"
                        class="btn secondary full-width"
                        style="margin-top: 8px"
                    >
                        Restore Defaults
                    </button>
                    <button
                        id="clearStorageBtn"
                        class="btn secondary full-width"
                        style="margin-top: 8px; color: var(--error)"
                    >
                        Danger: Clear Extension Storage
                    </button>
                    <div id="status" class="status-msg"></div>
                </div>
            </main>
        </div>
        <script type="module" src="options.js"></script>
    </body>
</html>
